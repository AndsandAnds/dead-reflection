POSTGRES_DB=
POSTGRES_USER=
POSTGRES_PASSWORD=
POSTGRES_PORT=

# Optional Postgres 18 perf knob (Linux-only). Only change after benchmarking.
# POSTGRES_IO_METHOD=io_uring

API_PORT=
UI_PORT=

OLLAMA_BASE_URL=
OLLAMA_MODEL=
OLLAMA_TIMEOUT_S=

STT_BASE_URL=
STT_TIMEOUT_S=

# Optional: host-run STT bridge configuration (whisper.cpp).
# WHISPER_CPP_BIN=/opt/homebrew/bin/whisper-cli
# WHISPER_CPP_MODEL=$HOME/whisper-models/ggml-base.en.bin

TTS_BASE_URL=
TTS_TIMEOUT_S=

# Optional: Automatic1111 (Stable Diffusion Web UI) for avatar image generation.
# Example: A1111_BASE_URL=http://host.docker.internal:7860
A1111_BASE_URL=
A1111_TIMEOUT_S=120

# Avatar image generation engine (quality-first recommended for SDXL):
# - diffusers_sdxl: Diffusers SDXL base (+ optional refiner) in-process
# - a1111: Automatic1111 Web UI API
AVATAR_IMAGE_ENGINE=diffusers_sdxl

# Diffusers SDXL (local-only). These should point to local directories (recommended),
# or to model IDs that already exist in your local HF cache.
#
# Example local dirs (you create/download these yourself):
# DIFFUSERS_SDXL_BASE_MODEL=$HOME/models/sdxl-base-1.0
# DIFFUSERS_SDXL_REFINER_MODEL=$HOME/models/sdxl-refiner-1.0
DIFFUSERS_SDXL_BASE_MODEL=          # example: /app/stable-diffusion/base
DIFFUSERS_SDXL_REFINER_MODEL=       # example: /app/stable-diffusion/refiner
DIFFUSERS_LOCAL_FILES_ONLY=true
# NOTE: Docker on macOS cannot use Metal/MPS. Use cpu in containers.
# For MPS acceleration, run the API (or an image-gen bridge) on the host.
DIFFUSERS_DEVICE=cpu
DIFFUSERS_DTYPE=float32
DIFFUSERS_HIGH_NOISE_FRAC=0.8
DIFFUSERS_ENABLE_COMPILE=false

# Optional: host-run TTS bridge configuration.
# TTS_ENGINE=say|piper
# TTS_VOICE=            # macOS voice name (say)
# PIPER_BIN=piper       # path to piper binary
# PIPER_MODEL=          # path to a .onnx model
# PIPER_SPEAKER=        # optional integer speaker id (multi-speaker models)

NEXT_PUBLIC_API_BASE_URL=

# Defaults used until user/avatar profiles exist
DEFAULT_USER_ID=00000000-0000-0000-0000-000000000001
DEFAULT_AVATAR_ID=00000000-0000-0000-0000-000000000002

# Memory integration (auto episodic memory)
MEMORY_AUTO_INGEST=true
MEMORY_CHUNK_TURN_WINDOW=2

# Frontend needs IDs for inspect/delete UX
NEXT_PUBLIC_DEFAULT_USER_ID=00000000-0000-0000-0000-000000000001
NEXT_PUBLIC_DEFAULT_AVATAR_ID=00000000-0000-0000-0000-000000000002

# Auth (HTTP-only cookie session)
AUTH_COOKIE_NAME=reflections_session
AUTH_COOKIE_SECURE=false
AUTH_COOKIE_SAMESITE=lax
AUTH_SESSION_TTL_DAYS=30

# CORS (comma-separated). Include both hostnames since you might browse via either.
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

